function confirm_form(e){return confirm(e)}function remove_name_ops(){$("#ops_addedit").removeAttr("name"),$("#ops_delete").removeAttr("name"),$("#ops_useredit").removeAttr("name"),$("#ops_mtcu").removeAttr("name"),$("#ops_remtcu").removeAttr("name"),$("#ops_pralab").removeAttr("name")}function activate_pralabview(){$("#pralab").addClass("active"),$("#group").removeClass("active"),$("#preinfo").removeClass("active"),$("#userinfo").removeClass("active"),$("#close").removeClass("active"),$("#plab_view").removeClass("d-none"),$("#group_view").addClass("d-none"),$("#pinfo_view").addClass("d-none"),$("#user_view").addClass("d-none")}function activate_groupview(){$("#pralab").removeClass("active"),$("#group").addClass("active"),$("#preinfo").removeClass("active"),$("#userinfo").removeClass("active"),$("#close").removeClass("active"),$("#plab_view").addClass("d-none"),$("#group_view").removeClass("d-none"),$("#pinfo_view").addClass("d-none"),$("#user_view").addClass("d-none")}function activate_preinfoview(){$("#pralab").removeClass("active"),$("#group").removeClass("active"),$("#preinfo").addClass("active"),$("#userinfo").removeClass("active"),$("#close").removeClass("active"),$("#plab_view").addClass("d-none"),$("#group_view").addClass("d-none"),$("#pinfo_view").removeClass("d-none"),$("#user_view").addClass("d-none")}function activate_userview(){$("#pralab").removeClass("active"),$("#group").removeClass("active"),$("#preinfo").removeClass("active"),$("#userinfo").addClass("active"),$("#close").removeClass("active"),$("#plab_view").addClass("d-none"),$("#group_view").addClass("d-none"),$("#pinfo_view").addClass("d-none"),$("#user_view").removeClass("d-none"),remove_name_ops(),$("#ops_useredit").attr("name","ops"),$("#ops_useredit").val('{"command":"user_edit"}')}function show_search(e,a){$("#group_data").val(`{"course":${e},"id_group":${a}}`),$("#nav_options").removeClass("d-none"),$("#nav-profile").removeClass("show active"),$("#nav-profile-tab").attr("aria-selected","false"),$("#nav-new").addClass("show active"),$("#consult_msg").addClass("d-none")}function hide_serach(){$("#nav_options").addClass("d-none"),$("#nav-profile").removeClass("show active"),$("#sdt_table").removeClass("d-none"),$("#consult_msg").removeClass("d-none"),$("#nav-new").addClass("show active")}function addStudent_fromSelect(e){var a=getCookie("csrftoken"),o=JSON.parse($("#group_data").val()),s=JSON.stringify({command:"add_est",code:e,group_data:o});post_request("/",{ops:s,csrfmiddlewaretoken:a})}function search_student(){var e=$("#std_search").val();e.toString().length>=2?$.ajax({data:{code:e},type:"GET",url:"/sdtconsult/",success:function(a){var o=a.students;$("#student_list").empty(),$("#sdt_table").removeClass("d-none"),$("#consult_msg").addClass("d-none"),o.length>0?o.forEach(function(e){$("#student_list").append(`\n                            <tr>\n                                <td>\n                                    ${e.code}\n                                </td>\n                                <td>\n                                    ${e.name}\n                                </td>\n                                <td>\n                                    <button class="btn btn-secondary rounded" title="Agregar estudiante" onclick="addStudent_fromSelect(${e.code})"><i class="fa fa-check-circle" aria-hidden="true"></i></button>\n                                </td>\n                            </tr> `)}):($("#sdt_table").addClass("d-none"),$("#consult_msg").text(`No se ha encontrado alguna coincidencia con el código ${e}`))},error:function(e){//console.log(e.responseJSON.errors)}}):alert("Ingrese por lo menos dos digitos")}function addStudent_panel(e){show_search(e.curso,e.id_grupo),$("#student_modal").modal(),remove_name_ops(),$("#ops_addedit").attr("name","ops"),$("#msg_title").text("Agregar estudiante al grupo"),$("#stdconfirm_btn").text("Agregar"),$("#ops_addedit").val(`{"command":"add","curso":${e.curso},"id_grupo":${e.id_grupo}}`),$("#student_modal").attr("onsubmit",'return confirm("¿Desea añadir al nuevo estudiante a su grupo de laboratorio?")')}function editStudent_panel(e){hide_serach(),$("#student_modal").modal(),remove_name_ops(),$("#ops_addedit").attr("name","ops"),$("#msg_title").text("Editar información de estudiante"),$("#stdconfirm_btn").text("Confirmar"),$("#code").val(e.code),$("#name").val(e.name),$("#semester").val(e.semester),$("#email").val(e.email),$("#ops_addedit").val(`{"command":"edit","code":${e.code},"curso":${e.curso},"id_grupo":${e.id_grupo}}`),$("#student_modal").attr("onsubmit",'return confirm("¿Desea modificar la información del estudiante?")')}function viewlab_info(e){$("#pralab_name").text(e.name);var a=e.objs.replaceAll("/*/","\n");$("#pralab_objs").html(a);var o=e.mates.replaceAll("/*/","\n");$("#pralab_mates").html(o);var s=e.procs.replaceAll("/*/","\n");$("#pralab_procs").html(s),//console.log(e.nam),//console.log(e.objs),//console.log(e.mates),//console.log(e.procs)}function previewPraLab_panel(e){$("#pralab_details").modal(),remove_name_ops(),$("#ops_pralab").attr("name","ops"),viewlab_info(e),$("#id_lab").val(`${e.code}`),$("#id_dev").val(`${e.device}`)}function show_modalconfirm(e){$("#confirm").modal(),$("#delete_name").text(`¿Está seguro que desea retirar del grupo estudiante ${e.name}?`),remove_name_ops(),$("#ops_delete").attr("name","ops"),$("#ops_delete").val(`{"command":"delete","code":${e.code},"id_group":${e.id_grupo},"course":${e.curso}}`)}function course_ops(e){return remove_name_ops(),1==e?($("#ops_mtcu").attr("name","ops"),$("#ops_mtcu").val('{"command":"mat_course"}'),confirm("¿Desea inscribir el curso?")):0==e?($("#ops_remtcu").attr("name","ops"),$("#ops_remtcu").val('{"command":"del_course"}'),confirm("¿Desea retirar el curso?")):void 0}function init_pralab(e,a){var o=getCookie("csrftoken");$.redirect("laboratory/",{csrfmiddlewaretoken:o,id_lab:e,id_dev:a},"POST","_blank")}$(document).ready(function(){$("#pralab").click(activate_pralabview),$("#group").click(activate_groupview),$("#preinfo").click(activate_preinfoview),$("#userinfo").click(activate_userview),$("#close").click(function(){$("#pralab").removeClass("active"),$("#group").removeClass("active"),$("#preinfo").removeClass("active"),$("#userinfo").removeClass("active"),$("#close").addClass("active")}),$("#std_search").on("keyup",function(e){"Enter"!==e.key&&13!==e.keyCode||search_student()})});
